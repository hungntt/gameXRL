import base64
import io
import re
from flask import render_template, request, flash, redirect

from matplotlib import pyplot as plt
from matplotlib.backends.backend_agg import FigureCanvasAgg as FigureCanvas

from app import app
from app.routes.forms import CommentForm


@app.route('/', methods=['GET', 'POST'])
def index():
    """
    Render index page and Add new comment
    """

    image = decode_base64_string()
    form = CommentForm(request.form)
    if request.method == 'POST':
        # Save the comment to database
        # create_comment(form.data)
        # flash('New comment created successfully.')
        return redirect('/')

    return render_template('index.html', form=form, image=image)


# @app.route('/games', methods=['POST'])
# def new_game():
#     """
#     Add new game
#     """
#     form = GameForm(request.form)
#
#     if request.method == 'POST' and form.validate():
#         # Save the game to database
#         create_game(form)
#         flash('New game created successfully.')
#         return redirect('/')
#
#     return render_template('new_game.html', form=form)


def plot_png(image):
    fig = plt.figure()
    ax = fig.add_subplot(111)
    ax.imshow(image)

    output = io.BytesIO()
    FigureCanvas(fig).print_png(output)

    # Encode PNG image to base64 string
    pngImageB64String = "data:image/png;base64,"
    pngImageB64String += base64.b64encode(output.getvalue()).decode('utf8')

    return pngImageB64String


def decode_base64_string():
    pngImageB64String = "data:image/png;base64,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axw9ejQ6OjoiIqK+vj5qamri17/+daxZsyY+9rGPRUNDQ7zyyitxxx13xIUXXhgf+tCHKnVaADCkCUD61QsvvBCzZs0qPV6yZElERMyfPz+WL18eP/rRjyIi4i/+4i/Knvf000/HzJkzo6amJn7605/GN77xjejt7Y2Wlpb4+Mc/HnfffXeMGDFiwM4DAIYTAUi/mjlzZpzqc0bv9hmklpaW2Lx585keCwCS5nsAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMA6VfPPPNMzJ07N5qbmyOXy8Xjjz9etn3BggWRy+XKlksuuaRsn2KxGIsWLYqGhoYYM2ZMXHvttfH6668P4FkAwPAiAOlXBw4ciKlTp8aqVatOus/VV18d7e3tpeXJJ58s27548eJYt25drF27Np577rno7e2Na665Jo4ePdrf4wPAsFRV6QEY3tra2qKtre2U++Tz+SgUCifc1tXVFd/97nfj+9//fsyePTsiIh555JFoaWmJDRs2xFVXXXXGZwaA4c4dQCpu06ZNMX78+Dj//PNj4cKF0dnZWdq2devWOHz4cMyZM6e0rrm5OSZPnhzPP//8SY9ZLBaju7u7bAEA3iIAqai2trZYs2ZNbNy4Me67777YsmVLXHHFFVEsFiMioqOjI2pqauKcc84pe15jY2N0dHSc9LgrV66Murq60tLS0tKv5wEAQ4mXgKmom266qfTryZMnx0UXXRQTJ06MJ554IubNm3fS52VZFrlc7qTbly1bFkuWLCk97u7uFoEA8P9xB5BBpampKSZOnBg7duyIiIhCoRB9fX2xb9++sv06OzujsbHxpMfJ5/MxduzYsgUAeIsAZFDZu3dv7NmzJ5qamiIiYvr06VFdXR3r168v7dPe3h7btm2LGTNmVGpMABjSvARMv+rt7Y2dO3eWHu/atSteeumlqK+vj/r6+li+fHnccMMN0dTUFK+99lp86UtfioaGhrj++usjIqKuri5uvfXWuOOOO2LcuHFRX18fS5cujSlTppQ+FQwA/GEEIP3qhRdeiFmzZpUev/2+vPnz58cDDzwQL7/8cjz88MOxf//+aGpqilmzZsVjjz0WtbW1ped87Wtfi6qqqrjxxhvj4MGD8dGPfjQefPDBGDFixICfDwAMB7ksy7JKDwH9rbu7O+rq6uLs2fdErmpkpccBhqHsyKHYv+HO6Orq8r5jBj3vAQQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAKRfPfPMMzF37txobm6OXC4Xjz/+eNn2XC53wuXv/u7vSvvMnDnzuO0333zzAJ8JAAwfApB+deDAgZg6dWqsWrXqhNvb29vLlu9973uRy+XihhtuKNtv4cKFZft961vfGojxAWBYqqr0AAxvbW1t0dbWdtLthUKh7PEPf/jDmDVrVvzJn/xJ2frRo0cfty8A8N64A8ig8Z//+Z/xxBNPxK233nrctjVr1kRDQ0NccMEFsXTp0ujp6TnlsYrFYnR3d5ctAMBb3AFk0HjooYeitrY25s2bV7b+U5/6VLS2tkahUIht27bFsmXL4pe//GWsX7/+pMdauXJlfPnLX+7vkQFgSBKADBrf+9734lOf+lSMHDmybP3ChQtLv548eXJMmjQpLrroonjxxRdj2rRpJzzWsmXLYsmSJaXH3d3d0dLS0j+DA8AQIwAZFJ599tl49dVX47HHHnvXfadNmxbV1dWxY8eOkwZgPp+PfD5/pscEgGHBewAZFL773e/G9OnTY+rUqe+67/bt2+Pw4cPR1NQ0AJMBwPDjDiD9qre3N3bu3Fl6vGvXrnjppZeivr4+JkyYEBFvvTz7z//8z3Hfffcd9/xf//rXsWbNmvjYxz4WDQ0N8corr8Qdd9wRF154YXzoQx8asPMAgOFEANKvXnjhhZg1a1bp8dvvy5s/f348+OCDERGxdu3ayLIsPvnJTx73/JqamvjpT38a3/jGN6K3tzdaWlri4x//eNx9990xYsSIATkHABhuclmWZZUeAvpbd3d31NXVxdmz74lc1ch3fwLAHyg7cij2b7gzurq6YuzYsZUeB07JewABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABJTVekBYCBN+98NUZUfXekxgGHoSPHN2Lih0lPA6cllWZZVegjob93d3VFXVxev/vvOqK2trfQ4wDDU09MT/+f8/x1dXV0xduzYSo8Dp+QOIEmpqR4RNdUjKj0GMAz5s4WhxHsAAQASIwABABIjAAEAEiMAAQASIwABABIjAOlXK1eujA984ANRW1sb48ePj+uuuy5effXVsn2yLIvly5dHc3NzjBo1KmbOnBnbt28v26dYLMaiRYuioaEhxowZE9dee228/vrrA3kqADBsCED61ebNm+P222+Pn//857F+/fo4cuRIzJkzJw4cOFDa59577437778/Vq1aFVu2bIlCoRBXXnll9PT0lPZZvHhxrFu3LtauXRvPPfdc9Pb2xjXXXBNHjx6txGkBwJDmi6AZUL///e9j/PjxsXnz5rjssssiy7Jobm6OxYsXxxe/+MWIeOtuX2NjY3z1q1+Nz372s9HV1RXnnntufP/734+bbropIiJ+97vfRUtLSzz55JNx1VVXvevv+/YXQe/atcsXQQP9oqenJ1pbW30RNEOCO4AMqK6uroiIqK+vj4iIXbt2RUdHR8yZM6e0Tz6fj8svvzyef/75iIjYunVrHD58uGyf5ubmmDx5cmmfdyoWi9Hd3V22AABvEYAMmCzLYsmSJfHhD384Jk+eHBERHR0dERHR2NhYtm9jY2NpW0dHR9TU1MQ555xz0n3eaeXKlVFXV1daWlpazvTpAMCQJQAZMJ///Ofj3/7t3+Kf/umfjtuWy+XKHmdZdty6dzrVPsuWLYuurq7SsmfPnvc+OAAMMwKQAbFo0aL40Y9+FE8//XScd955pfWFQiEi4rg7eZ2dnaW7goVCIfr6+mLfvn0n3eed8vl8jB07tmwBAN4iAOlXWZbF5z//+fjBD34QGzdujNbW1rLtra2tUSgUYv369aV1fX19sXnz5pgxY0ZEREyfPj2qq6vL9mlvb49t27aV9gEATl9VpQdgeLv99tvj0UcfjR/+8IdRW1tbutNXV1cXo0aNilwuF4sXL44VK1bEpEmTYtKkSbFixYoYPXp03HLLLaV9b7311rjjjjti3LhxUV9fH0uXLo0pU6bE7NmzK3l6ADAkCUD61QMPPBARETNnzixbv3r16liwYEFERHzhC1+IgwcPxm233Rb79u2Liy++OH7yk5+UfV3L1772taiqqoobb7wxDh48GB/96EfjwQcfjBEjRgzUqQDAsOF7AEmC7wEE+pvvAWQo8R5AAIDECEAAgMQIQACAxAhAAIDECEAAgMQIQACAxAhAAIDECEAAgMQIQACAxPhRcCTh7R9409PTU+FJgOHq7T9f/IAthgIBSBLe/oP5z//8zys8CTDc9fT0RF1dXaXHgFPys4BJwrFjx+LVV1+NP/uzP4s9e/b4OZ39oLu7O1paWlzffuL69q8zcX2zLIuenp5obm6Os87yDisGN3cAScJZZ50Vf/RHfxQREWPHjvUXaD9yffuX69u//qfX150/hgr/RAEASIwABABIjAAkGfl8Pu6+++7I5/OVHmVYcn37l+vbv1xfUuNDIAAAiXEHEAAgMQIQACAxAhAAIDECEAAgMQKQZHzzm9+M1tbWGDlyZEyfPj2effbZSo805CxfvjxyuVzZUigUStuzLIvly5dHc3NzjBo1KmbOnBnbt2+v4MSD2zPPPBNz586N5ubmyOVy8fjjj5dtP53rWSwWY9GiRdHQ0BBjxoyJa6+9Nl5//fUBPIvB692u74IFC4777/mSSy4p28f1ZbgSgCThsccei8WLF8ddd90Vv/jFL+IjH/lItLW1xe7duys92pBzwQUXRHt7e2l5+eWXS9vuvffeuP/++2PVqlWxZcuWKBQKceWVV5Z+FjPlDhw4EFOnTo1Vq1adcPvpXM/FixfHunXrYu3atfHcc89Fb29vXHPNNXH06NGBOo1B692ub0TE1VdfXfbf85NPPlm23fVl2MogAR/84Aezz33uc2Xr3v/+92d33nlnhSYamu6+++5s6tSpJ9x27NixrFAoZPfcc09p3aFDh7K6urrsH//xHwdowqErIrJ169aVHp/O9dy/f39WXV2drV27trTPb3/72+yss87KfvzjHw/Y7EPBO69vlmXZ/Pnzs7/8y7886XNcX4YzdwAZ9vr6+mLr1q0xZ86csvVz5syJ559/vkJTDV07duyI5ubmaG1tjZtvvjl+85vfRETErl27oqOjo+w65/P5uPzyy13n9+B0rufWrVvj8OHDZfs0NzfH5MmTXfPTtGnTphg/fnycf/75sXDhwujs7Cxtc30ZzgQgw94bb7wRR48ejcbGxrL1jY2N0dHRUaGphqaLL744Hn744XjqqafiO9/5TnR0dMSMGTNi7969pWvpOp8Zp3M9Ozo6oqamJs4555yT7sPJtbW1xZo1a2Ljxo1x3333xZYtW+KKK66IYrEYEa4vw1tVpQeAgZLL5coeZ1l23DpOra2trfTrKVOmxKWXXhrve9/74qGHHiq9ed51PrPey/V0zU/PTTfdVPr15MmT46KLLoqJEyfGE088EfPmzTvp81xfhgN3ABn2GhoaYsSIEcf9i72zs/O4uyv8YcaMGRNTpkyJHTt2lD4N7DqfGadzPQuFQvT19cW+fftOug+nr6mpKSZOnBg7duyICNeX4U0AMuzV1NTE9OnTY/369WXr169fHzNmzKjQVMNDsViMX/3qV9HU1BStra1RKBTKrnNfX19s3rzZdX4PTud6Tp8+Paqrq8v2aW9vj23btrnm78HevXtjz5490dTUFBGuL8Obl4BJwpIlS+LTn/50XHTRRXHppZfGt7/97di9e3d87nOfq/RoQ8rSpUtj7ty5MWHChOjs7IyvfOUr0d3dHfPnz49cLheLFy+OFStWxKRJk2LSpEmxYsWKGD16dNxyyy2VHn1Q6u3tjZ07d5Ye79q1K1566aWor6+PCRMmvOv1rKuri1tvvTXuuOOOGDduXNTX18fSpUtjypQpMXv27Eqd1qBxqutbX18fy5cvjxtuuCGampritddeiy996UvR0NAQ119/fUS4vgxzFf0MMgygf/iHf8gmTpyY1dTUZNOmTcs2b95c6ZGGnJtuuilramrKqqurs+bm5mzevHnZ9u3bS9uPHTuW3X333VmhUMjy+Xx22WWXZS+//HIFJx7cnn766Swijlvmz5+fZdnpXc+DBw9mn//857P6+vps1KhR2TXXXJPt3r27Amcz+Jzq+r755pvZnDlzsnPPPTerrq7OJkyYkM2fP/+4a+f6MlzlsizLKhWfAAAMPO8BBABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIjAAEAEiMAAQASIwABABIzP8LBttRsnvCzpUAAAAASUVORK5CYII="
    output = io.BytesIO(base64.b64decode(re.sub("data:image/png;base64", '', pngImageB64String)))
    pngImageB64String = "data:image/png;base64,"
    pngImageB64String += base64.b64encode(output.getvalue()).decode('utf8')

    return pngImageB64String


if __name__ == '__main__':
    app.run()
